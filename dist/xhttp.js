!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("axios"),require("axios-retry")):"function"==typeof define&&define.amd?define(["exports","axios","axios-retry"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).xhttp={},e.axios,e.axiosRetry)}(this,(function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=r(t),i=r(n),s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},s.apply(this,arguments)};function u(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{a(r.next(e))}catch(e){i(e)}}function u(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,u)}a((r=r.apply(e,t||[])).next())}))}function a(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(a){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return s.label++,{value:u[1],done:!1};case 5:s.label++,r=u[1],u=[0];continue;case 7:u=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){s=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){s.label=u[1];break}if(6===u[0]&&s.label<o[1]){s.label=o[1],o=u;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(u);break}o[2]&&s.ops.pop(),s.trys.pop();continue}u=t.call(e,s)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,a])}}}function c(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}"function"==typeof SuppressedError&&SuppressedError;var l,d=o.default;e.XHttpMethod=void 0,(l=e.XHttpMethod||(e.XHttpMethod={})).GET="GET",l.POST="POST",l.PUT="PUT",l.DELETE="DELETE",l.PATCH="PATCH",l.OPTIONS="OPTIONS",l.get="GET",l.post="POST",l.put="PUT",l.delete="DELETE",l.patch="PATCH",l.options="OPTIONS";var f=function(){function e(){}return e.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.typeof=function(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()},e}(),p=function(){function t(e,t){var n,r,i,u,a,c,l,d,f;return void 0===t&&(t={}),this.timeout=3e4,this._cancelTokens=[],this._whiteListCancelTokens=[],this._cancelDuplicatedRequest=null===(n=null==e?void 0:e.cancelDuplicatedRequest)||void 0===n||n,this._cancelDuplicatedRequest&&(this._pendingRequests=new Map),this._rejectErrorPromise=null===(r=null==e?void 0:e.rejectErrorPromise)||void 0===r||r,this._retryConfig=null!==(i=null==e?void 0:e.retryConfig)&&void 0!==i?i:null,this._requestHandler=null!==(u=null==e?void 0:e.requestHandler)&&void 0!==u?u:void 0,this._responseHandler=null!==(a=null==e?void 0:e.responseHandler)&&void 0!==a?a:void 0,this._errorHandler=null!==(c=null==e?void 0:e.errorHandler)&&void 0!==c?c:void 0,this._requestFinally=null!==(l=null==e?void 0:e.requestFinally)&&void 0!==l?l:void 0,this._setRequestHeaders=null!==(d=null==e?void 0:e.setRequestHeaders)&&void 0!==d?d:void 0,this._defaultAxiosConfig=s({timeout:null!==(f=null==e?void 0:e.timeout)&&void 0!==f?f:this.timeout,validateStatus:function(e){return!0}},t),this.instance=o.default.create(this._defaultAxiosConfig),this._initAxiosRetry(),this._initInterceptors(),this}return t.prototype._initAxiosRetry=function(){var e=this;this._retryConfig&&i.default(this.instance,{retries:this._retryConfig.retry,retryDelay:function(t){return t*e._retryConfig.delay},shouldResetTimeout:!0,retryCondition:function(e){var t,n,r;return!((null===(t=e.message)||void 0===t?void 0:t.includes("not-retry"))||o.default.isCancel(e)||(null===(n=e.message)||void 0===n?void 0:n.includes("custom-error")))&&(!!i.default.isNetworkOrIdempotentRequestError(e)||(!e.code||(!!["ECONNRESET","ETIMEDOUT"].includes(e.code)||!("ECONNABORTED"!=e.code||!(null===(r=e.message)||void 0===r?void 0:r.includes("timeout"))))))}})},t.prototype._initInterceptors=function(){var e=this;this.instance.interceptors.request.use((function(t){var n;if(e._cancelTokens.length>100&&(e._cancelTokens=[]),e._whiteListCancelTokens.length>100&&(e._whiteListCancelTokens=[]),e._cancelDuplicatedRequest&&!t.cancelToken&&(e._removePendingRequest(t),e._addPendingRequest(t)),"object"===f.typeof(t)&&null!=e._setRequestHeaders&&(t=e._setRequestHeaders.call(e,t),"object"!==f.typeof(t)))throw new Error("XHttp Error: [setRequestHeaders] must be a function, and return a complete object value(RequestConfig) without missing original attributes!");return null===(n=e._requestHandler)||void 0===n||n.call(e,t),t}),(function(t){return o.default.isCancel(t)||(e._cancelDuplicatedRequest&&e._pendingRequests.clear(),e._whiteListCancelTokens=[],e._cancelTokens=[]),Promise.reject(t)})),this.instance.interceptors.response.use((function(t){var n,r;return e._cancelDuplicatedRequest&&!(null===(n=t.config)||void 0===n?void 0:n.cancelToken)&&e._removePendingRequest(t.config),null===(r=e._responseHandler)||void 0===r||r.call(e,t),{status:null==t?void 0:t.status,statusText:null==t?void 0:t.statusText,data:null==t?void 0:t.data}}),(function(t){var n;o.default.isCancel(t)||(e._cancelDuplicatedRequest&&e._pendingRequests.clear(),e._whiteListCancelTokens=[],e._cancelTokens=[]);var r=null!==(n=t.response)&&void 0!==n?n:t;return Promise.reject(r)}))},t.prototype._addPendingRequest=function(e){var t=this,n=[e.method,e.url,JSON.stringify(e.params),JSON.stringify(e.data)].join("&");e.cancelToken=new o.default.CancelToken((function(r){t._pendingRequests.has(n)||(t._pendingRequests.set(n,r),e.cancelRequest=r)}))},t.prototype._removePendingRequest=function(e){var t=[e.method,e.url,JSON.stringify("string"==f.typeof(e.params)?JSON.parse(e.params):e.params),JSON.stringify("string"==f.typeof(e.data)?JSON.parse(e.data):e.data)].join("&");this._pendingRequests.has(t)&&(this._pendingRequests.get(t)(t),this._pendingRequests.delete(t))},t.prototype.request=function(e,t,n,r){var i;return void 0===n&&(n={}),void 0===r&&(r=!1),u(this,void 0,void 0,(function(){var u,c,l,d=this;return a(this,(function(a){return(u=s(s({},n),{url:t,method:e})).rejectErrorPromise=null!==(i=u.rejectErrorPromise)&&void 0!==i?i:this._rejectErrorPromise,this._cancelDuplicatedRequest&&!r||(c=o.default.CancelToken.source(),l=c.token,r?this._whiteListCancelTokens.push(c):this._cancelTokens.push(c),u.cancelToken=l,u.cancelRequest=c.cancel),[2,this.instance.request(u).then((function(e){return e.data})).catch((function(e){var t;return null===(t=d._errorHandler)||void 0===t?void 0:t.call(d,e,u)})).finally((function(){var e;null===(e=d._requestFinally)||void 0===e||e.call(d,u)}))]}))}))},t.prototype.axiosRequest=function(e,t,n){var r;return void 0===t&&(t={}),void 0===n&&(n=!1),u(this,void 0,void 0,(function(){var i,u,c,l=this;return a(this,(function(a){return(i=s(s({},t),{url:e})).rejectErrorPromise=null!==(r=i.rejectErrorPromise)&&void 0!==r?r:this._rejectErrorPromise,this._cancelDuplicatedRequest&&!n||(u=o.default.CancelToken.source(),c=u.token,n?this._whiteListCancelTokens.push(u):this._cancelTokens.push(u),i.cancelToken=c,i.cancelRequest=u.cancel),[2,this.instance.request(i).then((function(e){return e.data})).catch((function(e){var t;return null===(t=l._errorHandler)||void 0===t?void 0:t.call(l,e,i)})).finally((function(){var e;null===(e=l._requestFinally)||void 0===e||e.call(l,i)}))]}))}))},t.prototype.get=function(t,n,r,o){return void 0===n&&(n={}),void 0===r&&(r={}),void 0===o&&(o=!1),u(this,void 0,void 0,(function(){return a(this,(function(i){return[2,this.request(e.XHttpMethod.GET,t,s(s({},r),{params:n}),o)]}))}))},t.prototype.post=function(t,n,r,o){return void 0===n&&(n={}),void 0===r&&(r={}),void 0===o&&(o=!1),u(this,void 0,void 0,(function(){return a(this,(function(i){return[2,this.request(e.XHttpMethod.POST,t,s(s({},r),{data:n}),o)]}))}))},t.prototype.put=function(t,n,r,o){return void 0===n&&(n={}),void 0===r&&(r={}),void 0===o&&(o=!1),u(this,void 0,void 0,(function(){return a(this,(function(i){return[2,this.request(e.XHttpMethod.PUT,t,s(s({},r),{data:n}),o)]}))}))},t.prototype.patch=function(t,n,r,o){return void 0===n&&(n={}),void 0===r&&(r={}),void 0===o&&(o=!1),u(this,void 0,void 0,(function(){return a(this,(function(i){return[2,this.request(e.XHttpMethod.PATCH,t,s(s({},r),{data:n}),o)]}))}))},t.prototype.delete=function(t,n,r,o){return void 0===n&&(n={}),void 0===r&&(r={}),void 0===o&&(o=!1),u(this,void 0,void 0,(function(){return a(this,(function(i){return[2,this.request(e.XHttpMethod.DELETE,t,s(s({},r),{data:n}),o)]}))}))},t.prototype.postForm=function(t,n,r,o,i,c){return void 0===n&&(n={}),void 0===r&&(r=!1),void 0===o&&(o=!1),void 0===i&&(i={}),void 0===c&&(c=!1),u(this,void 0,void 0,(function(){var u;return a(this,(function(a){return u=new FormData,Object.keys(n).forEach((function(e){if(Array.isArray(n[e]))for(var t in n[e])r?u.append(o?"".concat(e,"[]"):"".concat(e,"[").concat(t,"]"),n[e][t]):u.append(e,n[e][t]);else u.append(e,"object"==f.typeof(n[e])?JSON.stringify(n[e]):n[e])})),[2,this.request(e.XHttpMethod.POST,t,s({data:u,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8;"}},i),c)]}))}))},t.prototype.postFile=function(t,n,r,o,i,c,l){return void 0===r&&(r="file"),void 0===o&&(o=!1),void 0===i&&(i=!1),void 0===c&&(c={}),void 0===l&&(l=!1),u(this,void 0,void 0,(function(){var u;return a(this,(function(a){return u=new FormData,Array.isArray(n)?n.forEach((function(e,t){o?u.append(i?"".concat(r,"[]"):"".concat(r,"[").concat(t,"]"),e):u.append(r,e)})):u.append(r,n),[2,this.request(e.XHttpMethod.POST,t,s({data:u,headers:{"Content-Type":"multipart/form-data"}},c),l)]}))}))},t.prototype.cancelRequest=function(e){var t,n;if(this._cancelDuplicatedRequest){try{for(var r=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(this._pendingRequests),o=r.next();!o.done;o=r.next()){var i=c(o.value,2),s=i[0];(0,i[1])(e?"".concat(e,": ").concat(s):s)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}this._pendingRequests.clear()}else this._cancelTokens.forEach((function(t){null==t||t.cancel(e)})),this._cancelTokens=[];return this},t.prototype.cancelWhiteListRequest=function(e){return this._whiteListCancelTokens.forEach((function(t){null==t||t.cancel(e)})),this._whiteListCancelTokens=[],this},t.prototype.getCancelToken=function(){return o.default.CancelToken.source()},t.prototype.getBaseURL=function(){return this.instance.defaults.baseURL},t.prototype.setBaseURL=function(e){return this.instance.defaults.baseURL=e,this},t.prototype.getHeaders=function(){return this.instance.defaults.headers},t.prototype.setHeaders=function(e){return this.instance.defaults.headers=e,this},t.prototype.getHeader=function(e){return this.instance.defaults.headers.common[e]},t.prototype.setHeader=function(e,t){return t?this.instance.defaults.headers.common[e]=t:delete this.instance.defaults.headers.common[e],this},t.prototype.setRequestTimeout=function(e){return this.instance.defaults.timeout=e,this},t.prototype.getAuthToken=function(){var e=this.getHeader("Authorization");return null==e?null:e},t.prototype.setAuthToken=function(e){return this.setHeader("Authorization",e),this},t.prototype.isCancel=function(e){return o.default.isCancel(e)},t.prototype.getInstance=function(){return this.instance},t.prototype.create=function(e,n){return void 0===n&&(n={}),new t(e,n)},t}(),h=new p;e.Axios=d,e.CODE_MSG={200:"服务器成功返回请求的数据。",201:"新建或修改数据成功。",202:"一个请求已经进入后台排队（异步任务）。",204:"删除数据成功。",301:"资源永久移动，请求的资源已被永久的移动到新 URI，返回信息会包括新的 URI，浏览器会自动定向到新 URI。",302:"资源临时移动，只是临时被移动，客户端可继续使用原有 URI。",303:"查看其它地址，与 301 类似，使用 GET 和 POST 请求查看。",304:"资源未修改，所请求的资源未修改，服务器返回此状态码时，不会返回任何资源。客户端通常会缓存访问过的资源，通过提供一个头信息指出客户端希望只返回在指定日期之后修改的资源。",400:"发出的请求有错误，服务器没有进行新建或修改数据的操作。",401:"用户没有权限（令牌、用户名、密码错误）。",403:"用户得到授权，但是访问是被禁止的。",404:"发出的请求针对的是不存在的记录，服务器没有进行操作。",406:"请求的格式不可得。",410:"请求的资源被永久删除，且不会再得到的。",422:"当创建一个对象时，发生一个验证错误。",500:"服务器发生错误，请检查服务器。",502:"网关错误。",503:"服务不可用，服务器暂时过载或维护。",504:"网关超时。"},e.XHttp=h,e.XHttpClass=p,e.XHttpUtils=f,e.default=h,Object.defineProperty(e,"__esModule",{value:!0})}));
